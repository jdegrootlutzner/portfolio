<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/assets/favicon.svg" />
    <link rel="stylesheet" href="/style.css">
    <link rel="stylesheet" href="/assets/home/flexmasonry.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Julian DeGroot-Lutzner</title>
    <script defer data-domain="jdegrootlutzner.com" src="https://plausible.io/js/plausible.js"></script>
    <meta property="og:locale" content="en_US">
    <meta property="og:type" content="article">
    <meta property="og:title" content="Julian DeGroot-Lutzner">
    <meta property="og:description" content="Hello, my name is Julian and I make beautiful things for the Web. ">
    <meta property="og:url" content="https://jdegrootlutzner.com/">
    <meta property="og:site_name" content="jdegrootlutzner">
    <meta property="og:image" content="https://jdegrootlutzner.com/introduction.png">
    <meta property="og:image:width" content="1280">
    <meta property="og:image:height" content="800">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:creator" content="@jdegrootlutzner">  
    <meta name="twitter:site" content="@jdegrootlutzner">
  </head>

  <body class="home relative overflow-x-hidden" onload="initCanvas()">
    <section id="sketch_form_container" class="fixed hidden top-0 left-0 z-50 items-center w-full justify-center h-full">
      <div id="sketch_form" class="shadow-md bg-gray-50 p-8 flex flex-col items-center justify-center border border-gray-300 rounded-xl " >
        <p id="close_form" class="self-end font-trap font-black cursor-pointer text-xl mb-1">X</p>
        <div class="h-60">
          <img id="canvas_screenshot" class="h-full max-w-lg p-2">
        </div>  
        <div class="flex">
          <div>
            <p class="font-trap max-w-xs text-3xl mb-4">Add your sketch to the <a href="https://jdegrootlutzner.herokuapp.com/" target="_blank" class="underline hover:text-generic-blue">visitor log.</a></p>
            <div class="flex">
              <p>Sign your masterpiece:</p>
              <input id="sketch_artist" type="text" placeholder="your name" required="required" minlength="1" maxlength="15" class=" border-b-2 mx-4 pl-2 w-36">
            </div>
          </div>
          <button onclick="savePhoto()" class="self-end border-green-500 border-4 w-24 h-14  font-semibold text-xl rounded-3xl transition-colors duration-500 text-green-500 hover:bg-green-500 hover:text-gray-50">Save</button>
        </div>
      </div>
    </section>
    <img onclick="openPopUp()" id="saveIcon" src="/assets/home/save.svg" alt="" class="fixed top-60 z-50 left-10 cursor-pointer hidden">
    <canvas class="bg-transparent absolute top-0 left-0 z-40 pointer-events-none custom-cursor"></canvas>
    <div id="bodyContent">

    <div id="paint-brush" class="w-0 absolute z-20">
      <img src="/assets/home/paint-brush.png" alt=" z-20">

    </div>

    <div class=" flex flex-col md:flex-row w-full overflow-visible">

      <!-- Nav Bar -->
      <div class="mt-16 w-full md:w-56 lg:w-64 md:sticky md:mt-nav md:top-20 md:mr-10 lg:mr-16 self-start flex justify-center md:justify-end z-50">
        <nav class="text-center w-full md:text-right font-trap font-black text-lg md:text-2xl flex flex-col space-y-2 text-shadow ">
         <p onClick="scrollToId('about')" class="cursor-pointer hover:text-generic-blue">About</p>
         <p onClick="scrollToId('projects')" class="cursor-pointer hover:text-generic-blue">Projects</p>
         <p onClick="scrollToId('contact')" class="cursor-pointer hover:text-generic-blue">Contact</p>
       </nav>
      </div>


      <!-- Main Section -->
      <div class="w-full md:mr-20 lg:mr-32 max-w-6xl">

        <div class="w-screen absolute left-0 z-30">

        </div>

        <!-- Bio  -->
        <section id="bio" class="z-10 w-screen absolute left-0 opacity-0 pointer-events-none">
          <div class="z-10  absolute flex  justify-center w-full top-28 sm:top-44">
            <div class="text-white text-md sm:text-xl w-10/12 sm:w-7/12 lg:w-5/12 max-w-md flex flex-col space-y-3">
            <h1> Hello, my name is Julian and I make beautiful things for the Web. 
            </h1>
            <h2>
              Recently, I've been working as the lead developer and project manager
              at a small web design company. In the past, I worked for the Berkman Klein Center at Harvard, and at the Chinook Fund in Denver, Colorado.
              I primarily work with Ruby on Rails, Javascript, HTML/CSS, and R.
            </h2>
            <h3>
              I won the Interdisciplinary Learning Award at Pitzer College, where my studies combined sociology, computer science, and statistics. I enjoy running, playing chess, learning, and collaborating with friends.
            </h3>
            <div class="flex space-x-6">
              <a href="https://www.instagram.com/jdegrootlutzner/">
                <img src="/assets/instagram-icon.svg" alt="Instagram">
              </a>
              <a href="https://twitter.com/jdegrootlutzner">
                <img src="/assets/twitter-icon.svg" alt="Twitter">
              </a>
              <a href="https://github.com/jdegrootlutzner">
                <img src="/assets/github-icon.svg" alt="Github">
              </a>
              <a href="https://www.linkedin.com/in/jdegrootlutzner/">
                <img src="/assets/linkedin-icon.svg" alt="LinkedIn">
              </a>
            </div>
          </div>
          </div>
          <img src="/assets/home/paint-stroke-5.png" class="pointer-events-none z-0 w-full absolute top-0 md:top-8  h-paint sm:h-paint-sm" alt="">
      
        </section>

      <!-- Hero -->
      <section id='about' class=" pt-20  mb-nav ">
        <div class="relative">
        <img src="/assets/home/doodle-box-md.png"  class="pointer-events-none hidden sm:block absolute top-0 h-full w-full px-3 " alt="">
        <img src="/assets/home/doodle-box.png"  class="sm:hidden pointer-events-none absolute top-0 h-full w-full px-1" alt="">

        <img class="pointer-events-none absolute bottom-10 left-8 md:hidden w-32" src="/assets/home/hello-small.png" alt="">
        <div class="grid  grid-cols-12 grid-rows-1 w-full p-14">
          <div class="col-span-2 sm:col-span-4 self-end">
            <img class="hidden md:block pointer-events-none" src="/assets/home/hello-medium.png" alt="Hello Doodle">
          </div>
          <div class="col-span-10 sm:col-span-8 text-right flex justify-end ">
            <div class="font-trap max-w-sm lg:max-w-md">
              <img src="/introduction.png" class="pointer-events-none" style="width:fit-content;" alt="My name is Julian and I am a web developer, designer, and artist.">
              <div onclick="paintMyBio()"
               class="flex cursor-pointer space-x-3 justify-end mt-14 sm:mt-10 mr-2 text-md sm:text-2xl text-black-2F">
                <img src="/assets/home/chevron.svg" alt="">
                <p>Read More</p>
            </div>
            </div>
          </div>
      </div>
    </div>
    <noscript class="flex flex-col space-y-3 max-w-md">
      <h1> Hello, my name is Julian and I make beautiful things for the Web.  
      </h1>
      <h2>
        Recently, I've been working as the lead developer and project manager
        at a small web design company. In the past, I worked for the Berkman Klein Center at Harvard, and at the Chinook Fund in Denver, Colorado.
        I primarily work with Ruby on Rails, Javascript, HTML/CSS, and R.
      </h2>
      <h3>
        I won the Interdisciplinary Learning Award at Pitzer College, where my studies combined sociology, computer science, and statistics. I enjoy running, playing chess, learning, and collaborating with friends.
      </h3>
      <p>P.S. This website looks better with Javascript enabled</p>
    </noscript>
        </section>

      <!-- Projects -->
      <section id="projects" class="flex flex-col items-center md:block">
        <div class="relative pt-3 my-3 group">
          <div class="opacity-0 group-hover:opacity-100 transition-opacity duration-500 h-20 bg-gradient-to-r transform -skew-y-6 w-60 from-transparent via-generic-yellow to-transparent">
          </div>
          <img class="absolute w-60 top-2" src="/assets/home/projects.png" alt="Projects:">
        </div>
 
        <!-- style="background-image: url('/printer-page.jpg');" -->
      <div id="project-grid" 
          class="flex flex-col items-center masonry-grid mx-4 md:mx-0 font-trap font-bold">
          <div id="project-filter" class="max-w-sm pt-10">
          <div class="px-4 py-6 m-2 relative ">
             <img src="/assets/home/project-box-1.png" class="project-sketch-box" alt="">
             <p class="text-xl">Showing <span id="showingProjects"></span>/<span id="totalProjects"></span> Projects</p>
             <div class="flex">
               <p>Web Development</p>
               <input type="checkbox" checked onclick="filterProjects(1)">
             </div>
             <div class="flex">
               <p>Data Analytics</p>
               <input type="checkbox" checked onclick="filterProjects(2)">
             </div>
             <div class="flex">
               <p>Web Design</p>
               <input type="checkbox" checked onclick="filterProjects(3)">
             </div>
             <div class="flex">
               <p>Art</p>
               <input type="checkbox" checked onclick="filterProjects(4)">
             </div>
             <div class="flex">
               <p>Other</p>
               <input type="checkbox" checked onclick="filterProjects(5)">
             </div>
         </div>
         </div> 
        <a href="/pentridge/">
        <div class="masonry-item" 
            onmouseover="updatePreview(this)"
            summary="Rebranded beer garden as a professional private event space with a bespoke website."
            details="Custom CMS using Ruby on Rails, HTML/Tailwind, Vanilla JS, SendGrid, AWS, Digital Ocean, Mapbox API, Github, Figma"
            tags="1">
          <div class="project-card">
            <img src="/assets/home/project-box-1.png" class="project-sketch-box" alt="">
            <img class="project-image" src="/assets/home/pentridge-station.jpg" alt="A screenshot from a website I made at pentridgestation.com">
            <div class="h-28 ">
            <p class="ml-1 project-title">pentridgestation.com</p>
            <p class="mb-2 project-subtitle"> RoR Web App, 2021</p>
            </div>
         </div>
        </div>
      </a>
      <a href="/privacy/">
      <div class="masonry-item" 
          onmouseover="updatePreview(this)"
          summary="Created an accessible video on digital privacy as part of my Honors Thesis."
          details="Video animation resourcefully created using only Google Slides"
          tags="5">
        <div class="project-card">
          <img src="/assets/home/project-box-2.png" class="project-sketch-box" alt="">
          <img class="project-image" src="/assets/home/privacy-video.jpg" alt="An old school television showing a screenshot from a video I made inside of it.">
          <div class="h-28 ">
            <p class="project-title">Digital Privacy Video</p>
            <p class="project-subtitle"> Video, 2019</p>
          </div>
       </div>
      </div>
      </a>
      <a href="/honeybis/">
        <div class="masonry-item" 
            onmouseover="updatePreview(this)"
            summary="Launched E-Commerce website for Philly based CBD infused Honey start-up."
            details="WordPress, Elementor, Figma, Adobe Creative Cloud, HTML/CSS, and Javascript. 3D Animation using Lottie and Bodymovin"
            tags="1,3">
          <div class="project-card">
            <img src="/assets/home/project-box-3.png" class="project-sketch-box" alt="">
            <img class="project-image" src="/assets/home/honeybis.jpg" alt="A 3D model of a bottle of honey that is featured on a website I made at honeybis.com">
            <div class="h-28 ">
              <p class="project-title">honeybis.com</p>
              <p class="project-subtitle">E-Commerce Website, 2021</p>
            </div>
         </div>
        </div>
      </a>
        <a href="/redial/">
        <div class="masonry-item" 
            onmouseover="updatePreview(this)"
            summary="Turned rotary phone into an interactive art piece at Harvard's Library Innovation Lab. "
            details="Python, Raspberry Pi, Github, Iterative Design Process"
            tags="4,5">
          <div class="project-card">
            <img src="/assets/home/project-box-3.png" class="project-sketch-box" alt="">
            <img class="project-image" src="/assets/home/redial.jpg" alt="A rotary phone with featuring a sketch of oral storytelling inside of it.">
            <div class="h-28 ">
              <p class="project-title">Redial</p>
              <p class="project-subtitle"> Art & Technology, 2018</p>
            </div>
         </div>
        </div>
        </a>
        <a href="/citibikes/">
        <div class="masonry-item" 
            onmouseover="updatePreview(this)"
            summary="Cleaned, visualized, and analyzed large Citibikes dataset in R."
            details="R, MySQL, ggplot2, dplyr, caret "
            tags="2">
          <div class="project-card">
            <img src="/assets/home/project-box-2.png" class="project-sketch-box" alt="">
            <img class="project-image" src="/assets/home/citibikes.gif" alt="A Gif of a few different graphs I made during a data analysis project about NYC's citibikes">
            <div class="h-28 ">
              <p class="project-title">Citibikes Data Analysis</p>
              <p class="project-subtitle"> R Project, 2017</p>
            </div>
         </div>
        </div>
        </a>
        <a href="/chiphoagie/">
        <div class="masonry-item" 
            onmouseover="updatePreview(this)"
            summary="Built web tools that improve the coverage of collegiate Track and Field."
            details="Chrome/Firefox Extension, R, Heroku, Ruby on Rails, HTML/Tailwind, Javascript/Typescript, Figma, Adobe Creative Cloud"
            tags="1,2,3">
          <div class="project-card">
            <img src="/assets/home/project-box-1.png" class="project-sketch-box" alt="">
            <img class="project-image" src="/assets/home/stopwatch.jpg" alt="A 3D model of an athletic cartoon stopwatch with arms, legs, and running gear.">
            <div class="h-28 ">
              <p class="project-title">chiphoagie.com</p>
              <p class="project-subtitle"> Side Project, Current</p>
            </div>
         </div>
        </div>
      </a>
      <a href="/chinook/">
        <div class="masonry-item" 
            onmouseover="updatePreview(this)"
            summary="Served as communication and development intern at a nonprofit in Denver, CO."
            details="Adobe Creative Cloud, MailChimp, WordPress, Google Ads, Facebook Ads"
            tags="4,5">
          <div class="project-card">
            <img src="/assets/home/project-box-1.png" class="project-sketch-box" alt="">
            <img class="project-image" src="/assets/home/chinook-fund.gif" alt="A Gif of a few designs I made while I was an intern at a nonprofit in Colorado.">
            <div class="h-28 ">
              <p class="project-title">Chinook Fund</p>
              <p class="project-subtitle"> Intern, 2017</p>
            </div>
         </div>
        </div>
      </a>
      <a href="/tables/">
        <div class="masonry-item" 
            onmouseover="updatePreview(this)"
            summary="Furniture that showcases the beauty in the imperfect."
            details="Wood, paint, varnish"
            tags="4">
          <div class="project-card">
            <img src="/assets/home/project-box-2.png" class="project-sketch-box" alt="">
            <img class="project-image " src="/assets/home/table.jpg" alt="A piece of furniture I made by cutting a set of drawers in half at an angle and then repurposing each half into a bedside table.">
            <div class="h-28 ">
              <p class="project-title">Bedside Tables</p>
              <p class="project-subtitle"> Furniture, 2021</p>
            </div>
         </div>
        </div>
      </a>
      <a href="/cloud/">
        <div class="masonry-item" 
            onmouseover="updatePreview(this)"
            summary="Painting exploring the implications of a cloud storage center deployed under the sea."
            details="Acrylic paint on canvas"
            tags="4">
          <div class="project-card">
            <img src="/assets/home/project-box-3.png" class="project-sketch-box" alt="">
            <img class="project-image" src="/assets/home/gallery.jpg" alt="A painting of a Microsoft cloud storage center submerged under the ocean in Ireland">
            <div class="h-28 ">
              <p class="project-title">Cloud Under the Sea</p>
              <p class="project-subtitle"> Painting, 2018</p>
            </div>
         </div>
      </div>
    </a>
    </div>
      <div id="preview" class="shadow-lg right-0 -bottom-52 pointer-events-none rounded-sm bg-white bg-opacity-90 hidden sm:flex border border-off-black fixed  max-w-lg mr-5">
        <div class="flex flex-col space-y-3 mb-3 mt-14">
          <img class="w-8" src="/assets/home/spiral.png" alt="">
          <img class="w-8" src="/assets/home/spiral.png" alt="">
          <img class="w-8" src="/assets/home/spiral.png" alt="">
          <img class="w-8" src="/assets/home/spiral.png" alt="">

        </div>

        <div class=" ml-4 w-full mr-2">
            <p class="font-trap font-bold mr-16 text-center pt-8 h-10 text-3xl underline" id="preview-title"></p>

            <p class="mt-8 text-xl font-semibold">â€¢ <span id="preview-summary"> </span></p> 

            <p class="mt-2 text-sm italic" id="preview-details"></p>

      </div>
    </div>
    </section>

      

      <!-- Contact -->
      <section id="contact" class="flex flex-col items-center mt-96">

        <img src="/assets/home/lost-wallet-text.png" class="w-2/3 pointer-events-none " alt="Lost wallet filled with $$$. If found email:">
        <a href="mailto:jdegrootlutzner@gmail.com"><img src="/assets/home/my-email.png" class="mt-6 mb-2 w-11/12 border-2 px-4 py-6 border-white hover:border-generic-blue" alt="jdegrootlutzner.com"></a>
        <div class="grid grid-cols-12">
          <img src="/assets/home/wallet.png" class="col-span-7 pointer-events-none" alt="Photo of a wallet filled with lots of money">
          <img src="/assets/home/no-reward-text.png" class="col-span-5 mt-6 pointer-events-none pr-5 sm:pr-0" alt="No reward!">
        </div>
      </section>




      </div>
    </div>
  </div>

    <script type="module" src="/main.js"></script>
    <script>
      var visibleProjectTypeList = [1,2,3,4,5];
      const projects = document.getElementsByClassName('masonry-item');
      const numProjects = projects.length;
      document.getElementById('totalProjects').textContent = numProjects;
      document.getElementById('showingProjects').textContent = numProjects;
     function updateVisibileProjectTypeList(projectType){
      if(![1,2,3,4,5].includes(projectType)){
        console.log(`Error: Project type ${projectType} does not exist`);
      } else {
        var i = visibleProjectTypeList.indexOf(projectType);
        if (i < 0 ){
          visibleProjectTypeList.push(projectType);
        } else {
          visibleProjectTypeList.splice(i,1);
        }

      }
     }

     function filterProjects(projectType){
      // web development 1, data analytics 2, web design 3, art 4, other 5
      updateVisibileProjectTypeList(projectType);
      var numShowingProjects = 0;
      for(var i = 0; i < numProjects; i++){
        var projectTypesVisible = 0;
        var projectTypes = projects[i].getAttribute('tags').split(',');
        var numProjectTypes = projectTypes.length;
        for(var ii = 0; ii < numProjectTypes; ii++){
          if ( visibleProjectTypeList.includes(parseInt(projectTypes[ii])) ){
            projectTypesVisible = projectTypesVisible + 1;
          }
        }
        if (projectTypesVisible == 0) {
          if (!(projects[i].classList.contains('opacity-10'))){
            projects[i].classList.add('opacity-10');
          }
        } else {
          numShowingProjects = numShowingProjects + 1;
          if ((projects[i].classList.contains('opacity-10'))){
            projects[i].classList.remove('opacity-10');
          }
        }
        document.getElementById('showingProjects').textContent = numShowingProjects;
      }     }

    function updatePreview(el){
      document.getElementById("preview-summary").textContent = el.getAttribute('summary');
      document.getElementById("preview-details").textContent = el.getAttribute('details');
      document.getElementById("preview-title").textContent = el.getElementsByTagName('p')[0].textContent;

    }
    function scrollToId(id){
      document.getElementById(id).scrollIntoView({block:"nearest", behavior:"smooth"});
    }

    function paintMyBio(){
      // document.getElementById('paint-brush').classList.add('move-it');
      document.getElementById('paint-brush').classList.add('paint-screen');
      document.getElementById('bio').classList.remove('opacity-0');
      document.getElementById('bio').classList.remove('pointer-events-none');
      document.getElementById('bio').classList.add('show-paint');

    }

    const canvas = document.querySelector("canvas");
    const context = canvas.getContext("2d");

    function setDimensions(){
      canvas.width = document.body.clientWidth;
      canvas.height = document.getElementById('bodyContent').clientHeight;
    }
    function initCanvas(){
      setTimeout( setCanvas, 50);
      pingVisitorsLog();
    }
    function setCanvas(){
      setDimensions();
      context.strokeStyle = "blue";
      // context.lineWidth = 2;
      context.lineCap = "round";
    }
    var doit;
    window.addEventListener("resize", function(event){
      clearTimeout(doit);
      doit = setTimeout( setCanvas, 50);
    });

    var shouldPaint = false;
    var firstPaint = true;

    document.addEventListener("mousedown", function(event){
	    shouldPaint = true;
      context.moveTo(event.pageX ,event.pageY);
	    context.beginPath();
    });

    document.addEventListener("mouseup", function(event){
	      shouldPaint = false;
    });

    document.addEventListener("mousemove",function(event){
	    if (shouldPaint) {
        if(firstPaint){
          showSaveIcon();
          firstPaint = false;
        }
 	      context.lineTo(event.pageX ,event.pageY);
 	      context.stroke();
      }
    });
    

    function showSaveIcon(){
      const saveIcon = document.getElementById('saveIcon');
      saveIcon.classList.remove('hidden');
      saveIcon.classList.add('animate-opacity');
    }


    function dataURItoBlob(dataURI) {
    // convert base64 to raw binary data held in a string
    // doesn't handle URLEncoded DataURIs - see SO answer #6850276 for code that does this
    var byteString = atob(dataURI.split(',')[1]);

    // separate out the mime component
    var mimeString = dataURI.split(',')[0].split(':')[1].split(';')[0];

    // write the bytes of the string to an ArrayBuffer
    var ab = new ArrayBuffer(byteString.length);
    var ia = new Uint8Array(ab);
    for (var i = 0; i < byteString.length; i++) {
        ia[i] = byteString.charCodeAt(i);
    }

    //Old Code
    //write the ArrayBuffer to a blob, and you're done
    //var bb = new BlobBuilder();
    //bb.append(ab);
    //return bb.getBlob(mimeString);

    //New Code
    return new Blob([ab], {type: mimeString});


}

  function pingVisitorsLog(){
        fetch('https://jdegrootlutzner.herokuapp.com/sketches.json', {
            method: 'GET'
          })
          .then(response => response.json())
          .then(result => {
            console.log('Ping Visitors Log Success:', result);
          })
          .catch(error => {
            console.error('Ping Visitors Log Error:', error);
          });
     }

    function savePhoto(){
      // preventDefault();
      document.getElementById('saveIcon').classList.remove('animate-opacity');
      document.getElementById('saveIcon').classList.add('animate-spin');
      var f = new FormData();
      var artistName = document.getElementById('sketch_artist').value;
      f.append('sketch[artist]', artistName);
      f.append('sketch[image]', dataURItoBlob(canvasImage));

      fetch('https://jdegrootlutzner.herokuapp.com/sketches.json', {
        method: 'POST',
        body: f,
      })
      .then(response => response.json())
      .then(result => {
        console.log('Success:', result);
      })
      .catch(error => {
        console.error('Error:', error);
      });
      
      document.getElementById('close_form').click();
      setTimeout( openNewPage, 1000);
          }

        function openNewPage(){
          window.open('https://jdegrootlutzner.herokuapp.com/','_blank');
          document.getElementById('saveIcon').classList.toggle('hidden');
        }

  function closeForm(e) {
    if(document.getElementById('close_form').contains(event.target) |
      !document.getElementById('sketch_form').contains(event.target)){
      const sketchFormContainer = document.getElementById('sketch_form_container');
      sketchFormContainer.classList.remove('flex');
      sketchFormContainer.classList.add('hidden');
      sketchFormContainer.removeEventListener('click',closeForm)
    }

  }
  function openPopUp() {
    const sketchFormContainer = document.getElementById('sketch_form_container');
    sketchFormContainer.classList.remove('hidden');
    sketchFormContainer.classList.add('flex');
    sketchFormContainer.addEventListener('click', closeForm);
    setCanvasImage();
    document.getElementById('canvas_screenshot').src = canvasImage;

}
var canvasImage; 
function setCanvasImage() {

  canvasImage = getTrimmedCanvas().toDataURL("image/png");
}
  // return a trimmed copy of the canvas
  getTrimmedCanvas = () => {
    // copy the canvas
    let copy = document.createElement('canvas')
    copy.width = canvas.width
    copy.height = canvas.height
    copy.getContext('2d').drawImage(canvas, 0, 0)
    // then trim it
    return trimCanvas(copy)
  }
function trimCanvas (c) {
  const context2 = c.getContext('2d')

  const imgWidth = c.width
  const imgHeight = c.height

  const imgData = context2.getImageData(0, 0, imgWidth, imgHeight).data

  // get the corners of the relevant content (everything that's not white)
  const cropTop = scanY(true, imgWidth, imgHeight, imgData)
  const cropBottom = scanY(false, imgWidth, imgHeight, imgData)
  const cropLeft = scanX(true, imgWidth, imgHeight, imgData)
  const cropRight = scanX(false, imgWidth, imgHeight, imgData)

  // + 1 is needed because this is a difference, there are n + 1 pixels in
  // between the two numbers inclusive
  const cropXDiff = (cropRight - cropLeft) + 1
  const cropYDiff = (cropBottom - cropTop) + 1

  // get the relevant data from the calculated coordinates
  const trimmedData = context2.getImageData(cropLeft, cropTop, cropXDiff,
    cropYDiff)

  // set the trimmed width and height
  c.width = cropXDiff
  c.height = cropYDiff
  // clear the canvas
  context2.clearRect(0, 0, cropXDiff, cropYDiff)
  // place the trimmed data into the cleared canvas to create
  // a new, trimmed canvas
  context2.putImageData(trimmedData, 0, 0)
  return c // for chaining
}

// returns the RGBA values of an x, y coord of imgData
function getRGBA (x, y, imgWidth, imgData) {
  return {
    red: imgData[(imgWidth * y + x) * 4],
    green: imgData[(imgWidth * y + x) * 4 + 1],
    blue: imgData[(imgWidth * y + x) * 4 + 2],
    alpha: imgData[(imgWidth * y + x) * 4 + 3]
  }
}

function getAlpha (x, y, imgWidth, imgData) {
  return getRGBA(x, y, imgWidth, imgData).alpha
}

// finds the first y coord in imgData that is not white
function scanY (fromTop, imgWidth, imgHeight, imgData) {
  const offset = fromTop ? 1 : -1
  const firstCol = fromTop ? 0 : imgHeight - 1

  // loop through each row
  for (let y = firstCol; fromTop ? (y < imgHeight) : (y > -1); y += offset) {
    // loop through each column
    for (let x = 0; x < imgWidth; x++) {
      // if not white, return col
      if (getAlpha(x, y, imgWidth, imgData)) {
        return y
      }
    }
  }

  // the whole image is white already
  return null
}

// finds the first x coord in imgData that is not white
function scanX (fromLeft, imgWidth, imgHeight, imgData) {
  const offset = fromLeft ? 1 : -1
  const firstRow = fromLeft ? 0 : imgWidth - 1

  // loop through each column
  for (let x = firstRow; fromLeft ? (x < imgWidth) : (x > -1); x += offset) {
    // loop through each row
    for (let y = 0; y < imgHeight; y++) {
      // if not white, return row
      if (getAlpha(x, y, imgWidth, imgData)) {
        return x
      }
    }
  }

  // the whole image is white already
  return null
}
    </script>
    
  </body>
 
</html>
